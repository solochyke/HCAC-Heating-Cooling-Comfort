(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63323],{646333:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var r=n(777460);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a=e=>{var t;const{nodeInstanceId:n,instanceHiearchy:r,declarationList:o,enhancer:a}=e,s=a||(()=>null);let c=null===(t=r[n])||void 0===t?void 0:t.parentInstance;const d=[];for(;c;){const e=c.contextId,t=c.mixedTypeMappingId;if(!e){c=c.parentInstance;continue}if(!c)break;const n=s(c,o.getById(c.nodeId)),r=d.findIndex((t=>t.ctxId===e)),a=d[r];n||!a?a?(d[r]=i(i({},a),n),c=c.parentInstance):(d.push(i(i({},n),{},{ctxId:e,nodeInstanceId:c.nodeInstanceId,mixedTypeMappingId:t})),c=c.parentInstance):c=c.parentInstance}return d}},305241:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(738924);const o=async e=>{var t;if("uninitialised"===(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.type))return null;if(!e)throw new Error("Could not resolve resource definition as it is not defined");const[n,o]=e;if("external-cms-item"===n.type)return await(async e=>{var t;return"uninitialised"===(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.type)?null:await r.M.Instance.resolveExternalCMSItemResourceDefinition(e)})([n,o]);if("external-cms-list"===n.type){return await(async e=>{var t;return"uninitialised"===(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.type)?null:await r.M.Instance.resolveExternalCMSListResourceDefinition(e)})(e)}throw new Error(`Unsupported resource definition:\n ${JSON.stringify(e[0])} \n`)}},410140:function(e,t,n){"use strict";n.r(t);var r=n(205632),o=(n(202784),n(867771)),i=n(552322);t.default=()=>{const e=(0,r.useRouter)(),{slug:t,compId:n,lang:a,detailsPageId:s,paginationState:c}=e.query;if(!t||!n)return null;let d={};return c&&(d=JSON.parse(c)),(0,i.jsx)(o.default,{lang:a,compId:n,detailsPageId:s,previewCMSListPaginationState:d})}},867771:function(e,t,n){"use strict";n.r(t),n.d(t,{SolidRendererContext:function(){return k},default:function(){return D}});var r=n(777460),o=n(676422),i=n.n(o),a=n(202784),s=n(205632),c=n(277886),d=n(625277),l=n(533324),u=n(592508),p=n(302503),g=n(395942),f=(n(99150),n(305241)),I=n(123163),y=n(930613),m=n(975350),v=n(646333),h=n(552322);const w=p.DIContainer.getInstance(),b=e=>{const t=(0,s.useRouter)(),{0:n,1:r}=(0,a.useState)({type:"loading"});return(0,a.useEffect)((()=>{if(!t.isReady)return;const e=w.getSingletonClassInstance("projectInitFlow"),n=w.getSingletonClassInstance("webComponentsFlow");return e.begin({url:t.asPath,query:{slug:t.query.slug,compId:t.query.compId,lang:t.query.lang,detailsPageId:t.query.detailsPageId},pathName:t.pathname,inPreviewMode:!0}).then((()=>{r({type:"ready"})})).catch((e=>{r({type:"error",message:e.toString()})})),n.register(),n.registerPreviewComponents(),()=>{e.leave()}}),[t.isReady]),"loading"===n.type?null:"error"===n.type?(0,h.jsxs)("h2",{children:["An error occured while rendering the page: ",n.message]}):e.children};var N=n(638852),x=n(173541),S=n(505892),j=n(781872);const P=e=>{const t=screen&&screen.width<768;return(0,h.jsxs)("div",{className:i().dynamic([["1673650600",[j.N_.TWO_UNITS,j.N_.UNIT]]])+" preview-app-layout",children:[(0,h.jsxs)("div",{className:i().dynamic([["1673650600",[j.N_.TWO_UNITS,j.N_.UNIT]]])+" preview-app-top-bar",children:[t&&(0,h.jsxs)(x.z,{style:"outline",colorScheme:"light",onClick:()=>{N.Z.mixpanelEvent(N.Z.AnalyticsEvents.DASHBOARD_VIEW,{source:"new-project-view"}),e.onRedirect&&e.onRedirect()},children:[(0,h.jsx)(S.J,{type:"arrow-left",size:12}),(0,h.jsx)("span",{className:i().dynamic([["1673650600",[j.N_.TWO_UNITS,j.N_.UNIT]]])+" back-text",children:"Back to Dashboard"})]}),(0,h.jsx)("span",{className:i().dynamic([["1673650600",[j.N_.TWO_UNITS,j.N_.UNIT]]])+" title",children:"Preview"})]}),(0,h.jsx)("div",{className:i().dynamic([["1673650600",[j.N_.TWO_UNITS,j.N_.UNIT]]])+" frame-container",children:e.children}),(0,h.jsx)(i(),{id:"1673650600",dynamic:[j.N_.TWO_UNITS,j.N_.UNIT],children:[".frame-container.__jsx-style-dynamic-selector{width:100vw;height:calc(100vh - 50px);position:relative;overflow:hidden;}",".frame-container.__jsx-style-dynamic-selector > *{position:absolute;top:0;left:0;width:100%;height:100%;}",`.preview-app-top-bar.__jsx-style-dynamic-selector{height:50px;text-align:center;font-size:20px;padding:10px ${j.N_.TWO_UNITS};background-color:#000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,`.back-text.__jsx-style-dynamic-selector{margin-left:${j.N_.UNIT};}`,".title.__jsx-style-dynamic-selector:only-child{margin:0 auto;}"]})]})},O=e=>{const{0:t,1:r}=(0,a.useState)(null);return(0,a.useEffect)((()=>{Promise.all([n.e(34992),n.e(63011)]).then(n.bind(n,63011)).then((e=>{r({SolidRenderer:e.default,PreviewerLinkNode:e.PreviewerLinkNode,PreviewerHTMLNode:e.PreviewerHTMLNode})}))}),[]),t?(0,h.jsx)(k.Provider,{value:t,children:e.children}):null};var _=n(757156);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T=p.DIContainer.getInstance(),k=(0,a.createContext)(null),R=e=>{const t=(0,s.useRouter)(),{SolidRenderer:n,PreviewerLinkNode:r,PreviewerHTMLNode:o}=(()=>{const e=(0,a.useContext)(k);if(!e)throw new Error("Cannot use solidRenderer context outisde a SolidRendererContext.Provider");return e})(),i=(0,a.useRef)(null),c=T.getSingletonClassInstance("elementRefProvider"),d=T.getSingletonClassInstance("projectUIState"),l=T.getSingletonClassInstance("projectDoc"),u=T.getSingletonClassInstance("sentryService"),p=_.H.Instance;return(0,a.useEffect)((()=>{var a,s;if(!i.current)throw new Error("PreviewAppRoot must have a valid iframe element");c.setIframeRef(i);const h=i.current.contentDocument;if(!h)throw new Error("Invalid iframe without document content created");for(;h.body.lastElementChild;)h.body.removeChild(h.body.lastElementChild);if(e.detailsPageId&&(0,g.mutate)(p,(t=>{t.activeDetailPages[e.compId]=e.detailsPageId})),e.previewCMSListPaginationState&&(0,g.mutate)(p,(t=>{t.previewCMSListPaginationState=e.previewCMSListPaginationState})),e.lang){const t=l.internationalization.availableLanguages[e.lang];t&&(0,g.mutate)(d,(n=>{n.internationalization.currentLanguage={short:e.lang,name:t}}))}const w=document.createElement("div");w.dataset.reference="nodes-placeholder";const b=document.createElement("span");b.dataset.reference="styles-placeholder",c.setIframeRoot(w),c.setIframeStyleRoot(b),h.body.appendChild(w),h.body.appendChild(b);const N=new I.o;N.init({rootHead:h.head,rootNode:w,styleRootNode:b,renderingMode:"preview",isInlinePreview:!0});const x=new n;x.renderInto(w,e.compId,T.getSingletonClassInstance("projectDoc"),N,c,d,p,!0,f.R,{logError:u.captureException,onContextValueChanged:e=>{(0,g.mutate)(d,(t=>{e.value?t.rendererInternals.contextByNodeInstanceId[e.nodeInstanceId]=e:delete t.rendererInternals.contextByNodeInstanceId[e.nodeInstanceId]}))},overwriteNodeRendering:e=>{const n=l.nodes.getById(e.nodeId);if("html-node"===n.type)return o(e);if(("element-node"===n.type||"cms-navigation-button"===n.type||"component-instance-node"===n.type)&&n.abilities&&"link"in n.abilities){let o;const{type:s,content:u}=n.abilities.link;switch(s){case y.RZ.CMS_NAVIGATION_BUTTON:o=e=>{var n,r,o;const i=d.rendererInternals.contextByNodeInstanceId,a=c.nodeInstanceData,s=l.nodes,p=(0,v.G)({nodeInstanceId:e,instanceHiearchy:a,declarationList:s,enhancer(e){const t=i[e.nodeInstanceId];return t?E({},t):null}}),g=l.nodes.getById(p[0].nodeId),f=c.getDomElementNodeIdByNodeInstanceId(e),I=null===(n=c.getDomTargetNode({nodeInstanceId:e}))||void 0===n||null===(r=n.dataset)||void 0===r?void 0:r.compInstanceId,y=l.getComponentIdForNode(I||f),{slug:h,paginationState:w}=t.query,b=JSON.parse(decodeURI(w||"{}")),N=null===(o=g.attrs)||void 0===o?void 0:o.paginationQuery;let x="";if("dynamic"===(null===N||void 0===N?void 0:N.type))if(I){const e=l.nodes.getById(I);if("prop"!==N.content.referenceType)throw new Error("Non prop pagination queries not yet supported!");const t=l.getProjectPageOrComponent(e.compIdOfCompInstance),n=null===t||void 0===t?void 0:t.propDefinitions[N.content.id].name;x=e.attrs[n||""].content.toString()}else{var S;const e=l.getProjectPageOrComponent(y);x=null===e||void 0===e||null===(S=e.propDefinitions[N.content.id].defaultValue)||void 0===S?void 0:S.toString()}else x=null===N||void 0===N?void 0:N.content.toString();if(!x)return;b[x]=u.type.includes("next")?parseInt(b[x])+1||2:parseInt(b[x])-1||1;const j=(0,m.zg)(h,y,{paginationState:JSON.stringify(b)});t.push(j)};break;case y.RZ.CMS_DETAILS_NAVLINK:o=e=>{var n;const r=d.rendererInternals.contextByNodeInstanceId,o=c.nodeInstanceData,i=l.nodes,a=(0,v.G)({nodeInstanceId:e,instanceHiearchy:o,declarationList:i,enhancer(e){const t=r[e.nodeInstanceId];return t?E({},t):null}});if(!a.length)throw new Error(`No context found for node instance ${e}`);const s=null===(n=Object.values(l.cmsPages.byId).find((e=>e&&"cms-details-page"===e.type&&e.contentType===u.contentType)))||void 0===n?void 0:n.id;if(!s)throw new Error(`No details page found for content type ${u}`);const{id:p}=a[0].value,{slug:g}=t.query,f=(0,m.zg)(g,s,{detailsPageId:p});t.push(f)};break;case y.RZ.NAVLINK:{const{slug:e}=t.query;o=()=>{const n=(0,m.zg)(e,u.routeName);t.push(n)};break}case y.RZ.URL:{var i;const{url:n,newTab:r}=u;if("string"===typeof n){o=()=>{window.open(n,r?"_blank":"_self")};break}const a=null===(i=e.props)||void 0===i?void 0:i[n.content.id];if(null!==a&&void 0!==a&&a.startsWith("#")){o=()=>{const e=a.substring(1),t=h.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})};break}const s=l.pages.byId[a];if(s){const{slug:e}=t.query;o=()=>{const n=(0,m.zg)(e,s.id);t.push(n)};break}o=()=>{window.open(a||"",r?"_blank":"_self")};break}case y.RZ.SECTION:{var a;const{section:t}=u;if("string"===typeof t){o=()=>{const e=h.getElementById(t);if(!e)throw new Error(`No section found with id ${t}`);e.scrollIntoView({behavior:"smooth"})};break}const n=null===(a=e.props)||void 0===a?void 0:a[t.content.id];if(null!==n&&void 0!==n&&n.startsWith("#")){o=()=>{const e=n.substring(1),t=h.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})};break}break}case y.RZ.PHONE:{const{phone:e}=u;o=()=>{window.location.href=`tel:${e}`};break}case y.RZ.MAIL:{const{mail:e,subject:t,body:n}=u;o=()=>{window.location.href=`mailto:${e}?subject=${t}&body=${n}`};break}}return r(e,o)}return null}});const S=`${null===(a=l.settings.code)||void 0===a?void 0:a.bodyTag} ${null===(s=l.settings.code)||void 0===s?void 0:s.headTag}}`;if(!S)return;const j=document.createElement("span");j.dataset.reference="scripts-placeholder";const P=document.createElement("script");P.setAttribute("type","module"),P.setAttribute("defer","true"),P.innerHTML="\n      import { Slider } from 'https://unpkg.com/@teleporthq/teleport-custom-scripts/dist/components.mjs'\n      new Slider().init()\n    ";const O=document.createElement("script");O.setAttribute("type","text/javascript"),O.setAttribute("src","https://unpkg.com/@teleporthq/react-components/dist/animate-on-reveal.umd.js"),O.setAttribute("defer","true"),j.appendChild(P),j.appendChild(O),h.body.appendChild(j);const _=(new DOMParser).parseFromString(S,"text/html"),C=[];return _.querySelectorAll("script").forEach((e=>{const t=Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{}),n=e.innerText;C.push({content:n,attributes:t})})),C.forEach((e=>{const t=document.createElement("script");Object.entries(e.attributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t.innerHTML=e.content,j.appendChild(t)})),()=>{var e;c.resetInstanceData(),N.detach(),(0,g.cleanupCustomSelectorsMap)("renderer",l),null===x||void 0===x||null===(e=x.dispose)||void 0===e||e.call(x)}}),[e.compId,e.detailsPageId,e.previewCMSListPaginationState]),(0,h.jsx)("iframe",{ref:i,id:"stage-frame"})};var D=({compId:e,lang:t,detailsPageId:n,previewCMSListPaginationState:r})=>{const o=(0,s.useRouter)(),{slug:a}=o.query,p=T.getSingletonClassInstance("projectUIState"),g=T.getSingletonClassInstance("projectDoc");if(!a)return null;if(e||(e=p.selection.componentId||g.pages.getHomePageId()),!e)return null;const f=Array.isArray(a)?a[0]:a;return(0,h.jsx)(c.F,{middlewares:[l.H],data:f,children:(0,h.jsxs)(d._,{title:`Preview | ${f}`,colorTheme:u.M.DARK_THEME,children:[(0,h.jsx)(b,{children:(0,h.jsx)(O,{children:(0,h.jsx)(P,{onRedirect:()=>{o.push("/workspaces")},children:(0,h.jsx)(R,{lang:t,compId:e,detailsPageId:n,previewCMSListPaginationState:r})})})}),(0,h.jsx)(i(),{id:"1415060136",children:["body{background:#fff;}","#crisp-chatbox{display:none !important;}"]})]})})}},642761:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/[slug]/preview/[compId]",function(){return n(410140)}])}},function(e){e.O(0,[49774,21335,82859,777,87572,92182,54132,30146,48834,43811,63774,43335,3942,36781,52388,21039,5486,31260,1297,68869,36645,90899,11727,46415,56051,73614,51344,74549,72327,42970,10733,49084,23163,92888,40179],(function(){return t=642761,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
